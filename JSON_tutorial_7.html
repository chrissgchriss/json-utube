<!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8" />
            <title>Ajax json data from mysql database</title>
            <style>
                div#databox {
                    width: 530px;
                    height: 320px;
                    border: thin solid grey;
                    padding: 12px;
                    background-color: grey;
                }
            </style>
            <script type="text/javascript">
                $myTimer;
                function ajax_json_data() {
                    var databox = document.getItemById("databox");
                    var arbituarybox = document.getItemById("arbituarybox");
                    var hp = new XMLHttpRequest();
                    hp.open("POST","json_mysql_data", true);
                    hp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                    hp.onreadystatechange = function() {
                        if (hp.readyState == 4 && hp.status == 200) {
                            var d = JSON.parse(hr.responseText);
                            // use d directly
                                arbituarybox.innerHTML = '+d[object].returnstamp+'; // access d directly
                                // iterate d through loop
                                databox.innerHTML = "";
                                for(object in d) { // use loop to iterate over d, so need for (o in d) ??????
                                    if (d[object].title) {
                                        databox.innerHTML += '<p><a href="blog.page?='+d[object].id+'">'+d[object].title+'</a><br>';
                                        databox.innerHTML += ''+d[object].cd+'</p>';
                                    }
                                }
                        }
                    }
                    hp.send("limit=4");
                    mytimer = setTimeout('ajax_json_data()', 6000);   
                }
            </script>
        </head>
        <body>
            <h2>Timed JSON Data Request Random Items Script</h2>
            <div id="databox"></div>
            <div id="arbituarybox"></div>
            <script type="text/javascript">ajax_json_data();</script>
        </body>
    </html>
        
